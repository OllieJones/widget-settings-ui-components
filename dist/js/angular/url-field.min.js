!function(){"use strict";angular.module("risevision.widget.common.url-field",["risevision.common.i18n","risevision.widget.common.tooltip","risevision.widget.common.storage-selector"]).directive("urlField",["$templateCache","$log",function(i,e){return{restrict:"E",require:"?ngModel",scope:{url:"=",hideLabel:"@",hideStorage:"@",companyId:"@"},template:i.get("_angular/url-field/url-field.html"),link:function(i,l,a,n){function t(i){var e;return e=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,-1===i.indexOf("://")&&(i="http://"+i),e.test(i)}function o(e){var l="https://storage-download.googleapis.com/storage/v1/b/risemedialibrary-",a=e.substring(e.indexOf("/o/"),e.indexOf(".html")+5);return l+i.companyId+a}i.doValidation=!0,i.forcedValid=!1,i.valid=!0,i.hideStorage||i.$on("picked",function(e,l){var a=l[0];-1!==l[0].indexOf(".html")&&(a=o(l[0])),i.url=a}),i.$watch("url",function(e){e&&i.doValidation&&(i.valid=t(i.url))}),i.$watch("valid",function(i){n&&(e.info("Calling $setValidity() on parent controller"),n.$setValidity("valid",i))}),i.$watch("doValidation",function(e){"undefined"!=typeof i.url&&(e?(i.forcedValid=!1,i.valid=t(i.url)):(i.forcedValid=!0,i.valid=!0))})}}}])}(),function(){try{app=angular.module("risevision.widget.common.url-field")}catch(i){app=angular.module("risevision.widget.common.url-field",[])}app.run(["$templateCache",function(i){"use strict";i.put("_angular/url-field/url-field.html",'<div class="form-group" >\n  <label for="url" ng-if="!hideLabel">{{ "url.label" | translate }}</label>\n  <div ng-class="{\'input-group\':!hideStorage}">\n    <input id="url" name="url" type="text" ng-model="url" class="form-control" placeholder="http://">\n    <span class="input-url-addon" ng-if="!hideStorage"><storage-selector company-id="{{companyId}}"></storage-selector></span>\n  </div>\n  <p ng-if="!valid" class="help-block">{{ "url.invalid" | translate }}</p>\n  <div class="checkbox" ng-show="forcedValid || !valid">\n    <label>\n      <input name="validate-url" ng-click="doValidation = !doValidation" type="checkbox"\n             value="validate-url" checked="checked"> {{"url.validate.label" | translate}}\n    </label>\n    <span popover="{{\'url.validate.tooltip\' | translate}}" popover-trigger="click"\n          popover-placement="top" rv-tooltip></span>\n  </div>\n</div>\n')}])}();